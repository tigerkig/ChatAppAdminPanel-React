{"ast":null,"code":"var _jsxFileName = \"E:\\\\dev\\\\admin_panel\\\\LocalsAdminPanel\\\\src\\\\components\\\\_dashboard\\\\general-app\\\\AppTotalChart.js\";\nimport { merge } from 'lodash';\nimport { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactApexChart from 'react-apexcharts'; // material\n\nimport { Card, CardHeader, Box, TextField } from '@material-ui/core'; //\n\nimport moment from 'moment';\nimport { BaseOptionChart } from '../../charts';\nimport axios from '../../../utils/axios'; // ----------------------------------------------------------------------\n// const CHART_DATA = [\n//   {\n//     category: 'statistics',\n//     data: [\n//       // { name: 'Active Users', data: [0, 0, 0, 0, 0, 13, 16, 17, 26, 40] },\n//       { name: 'Online Users', data: [0, 0, 0, 0, 22, 45, 42, 12, 12, 5] },\n//       { name: 'Registered Users', data: [0, 0, 0, 0, 1, 19, 20, 24, 36, 51] }\n//       // { name: 'App Installed', data: [0, 10, 21, 35, 40, 49, 62, 69, 91, 102] },\n//       // { name: 'App Download', data: [0, 12, 25, 38, 42, 58, 64, 72, 97, 120] }\n//     ]\n//   }\n// ];\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nAppTotalChart.propTypes = {\n  chartDate: PropTypes.string\n};\nexport default function AppTotalChart({\n  chartDate\n}) {\n  const [seriesData, setSeriesData] = useState('statistics');\n  const [dateCount, setDateCount] = useState(10);\n  const [chartData, setChartData] = useState([]);\n  useEffect(() => {\n    async function getAnalytics() {\n      if (chartDate) {\n        const toDateObj = new Date(chartDate);\n        const fromDateObj = new Date(toDateObj.getTime() - (dateCount - 1) * 1000 * 60 * 60 * 24);\n        const fromDate = moment(fromDateObj).format('YYYY-MM-DD');\n        const toDate = chartDate;\n        const {\n          data\n        } = await axios.get(`/analytics/logs/${fromDate}/${toDate}`);\n        const zeroValueArr = [];\n\n        for (let i = 0; i < dateCount; i += 1) {\n          zeroValueArr.push(0);\n        }\n\n        if (data.error) {\n          const CHART_DATA = [{\n            category: 'statistics',\n            data: [{\n              name: 'Online Users',\n              data: zeroValueArr\n            }, {\n              name: 'Registered Users',\n              data: zeroValueArr\n            }]\n          }];\n          setChartData(CHART_DATA);\n        } else {\n          const {\n            logs\n          } = data;\n          const onlineUserArr = zeroValueArr;\n          const registerUserArr = zeroValueArr;\n          const lastDateLimit = new Date(toDate.getTime() + 1000 * 60 * 60 * 24);\n\n          for (let i = 0; i < logs.length(); i += 1) {\n            const logDate = new Date(logs[i].date);\n\n            if (logDate >= fromDate && logDate < lastDateLimit) {\n              const index = Math.floor((logDate.getTime() - fromDateObj.getTime()) / (1000 * 60 * 60 * 24));\n              onlineUserArr[index] = logs[i].online_user_num;\n              registerUserArr[index] = logs[i].register_user_num;\n            }\n          }\n\n          const CHART_DATA = [{\n            category: 'statistics',\n            data: [{\n              name: 'Online Users',\n              data: onlineUserArr\n            }, {\n              name: 'Registered Users',\n              data: registerUserArr\n            }]\n          }];\n          setChartData(CHART_DATA);\n        }\n      }\n    }\n\n    getAnalytics();\n  }, [chartDate]);\n\n  const handleChangeSeriesData = event => {\n    setSeriesData(Number(event.target.value));\n  };\n\n  const daysList = num => {\n    const date = new Date(chartDate);\n    const datesCollection = [];\n\n    for (let i = 0; i < num; i += 1) {\n      const newDate = new Date(date.getTime() - i * 1000 * 60 * 60 * 24);\n      const dateFromatStr = moment(newDate).format('YYYY MMM DD'); // datesCollection.unshift(`${newDate.getDate()}/${newDate.getMonth() + 1}/${newDate.getFullYear()}`);\n\n      datesCollection.unshift(dateFromatStr);\n    }\n\n    return datesCollection;\n  };\n\n  const chartOptions = merge(BaseOptionChart(), {\n    xaxis: {\n      categories: daysList(dateCount)\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      title: \"Statistics Chart\",\n      subheader: \"Growing Fast\" // action={\n      //   <TextField\n      //     select\n      //     fullWidth\n      //     value={seriesData}\n      //     SelectProps={{ native: true }}\n      //     onChange={handleChangeSeriesData}\n      //     sx={{\n      //       '& fieldset': { border: '0 !important' },\n      //       '& select': { pl: 1, py: 0.5, pr: '24px !important', typography: 'subtitle2' },\n      //       '& .MuiOutlinedInput-root': { borderRadius: 0.75, bgcolor: 'background.neutral' },\n      //       '& .MuiNativeSelect-icon': { top: 4, right: 0, width: 20, height: 20 }\n      //     }}\n      //   >\n      //     {CHART_DATA.map((option) => (\n      //       <option key={option.category} value={option.category}>\n      //         {option.category}\n      //       </option>\n      //     ))}\n      //   </TextField>\n      // }\n\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), chartData.map(item => /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 3,\n        mx: 3\n      },\n      dir: \"ltr\",\n      children: item.category === seriesData && /*#__PURE__*/_jsxDEV(ReactApexChart, {\n        type: \"line\",\n        series: item.data,\n        options: chartOptions,\n        height: 364\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }, this)\n    }, item.category, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["E:/dev/admin_panel/LocalsAdminPanel/src/components/_dashboard/general-app/AppTotalChart.js"],"names":["merge","useEffect","useState","PropTypes","ReactApexChart","Card","CardHeader","Box","TextField","moment","BaseOptionChart","axios","AppTotalChart","propTypes","chartDate","string","seriesData","setSeriesData","dateCount","setDateCount","chartData","setChartData","getAnalytics","toDateObj","Date","fromDateObj","getTime","fromDate","format","toDate","data","get","zeroValueArr","i","push","error","CHART_DATA","category","name","logs","onlineUserArr","registerUserArr","lastDateLimit","length","logDate","date","index","Math","floor","online_user_num","register_user_num","handleChangeSeriesData","event","Number","target","value","daysList","num","datesCollection","newDate","dateFromatStr","unshift","chartOptions","xaxis","categories","map","item","mt","mx"],"mappings":"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","sourcesContent":["import { merge } from 'lodash';\nimport { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactApexChart from 'react-apexcharts';\n// material\nimport { Card, CardHeader, Box, TextField } from '@material-ui/core';\n//\nimport moment from 'moment';\nimport { BaseOptionChart } from '../../charts';\nimport axios from '../../../utils/axios';\n\n// ----------------------------------------------------------------------\n\n// const CHART_DATA = [\n//   {\n//     category: 'statistics',\n//     data: [\n//       // { name: 'Active Users', data: [0, 0, 0, 0, 0, 13, 16, 17, 26, 40] },\n//       { name: 'Online Users', data: [0, 0, 0, 0, 22, 45, 42, 12, 12, 5] },\n//       { name: 'Registered Users', data: [0, 0, 0, 0, 1, 19, 20, 24, 36, 51] }\n//       // { name: 'App Installed', data: [0, 10, 21, 35, 40, 49, 62, 69, 91, 102] },\n//       // { name: 'App Download', data: [0, 12, 25, 38, 42, 58, 64, 72, 97, 120] }\n//     ]\n//   }\n// ];\n\nAppTotalChart.propTypes = {\n  chartDate: PropTypes.string\n};\n\nexport default function AppTotalChart({ chartDate }) {\n  const [seriesData, setSeriesData] = useState('statistics');\n  const [dateCount, setDateCount] = useState(10);\n  const [chartData, setChartData] = useState([]);\n\n  useEffect(() => {\n    async function getAnalytics() {\n      if (chartDate) {\n        const toDateObj = new Date(chartDate);\n        const fromDateObj = new Date(toDateObj.getTime() - (dateCount - 1) * 1000 * 60 * 60 * 24);\n        const fromDate = moment(fromDateObj).format('YYYY-MM-DD');\n        const toDate = chartDate;\n        const { data } = await axios.get(`/analytics/logs/${fromDate}/${toDate}`);\n        const zeroValueArr = [];\n        for (let i = 0; i < dateCount; i += 1) {\n          zeroValueArr.push(0);\n        }\n        if (data.error) {\n          const CHART_DATA = [\n            {\n              category: 'statistics',\n              data: [\n                { name: 'Online Users', data: zeroValueArr },\n                { name: 'Registered Users', data: zeroValueArr }\n              ]\n            }\n          ];\n          setChartData(CHART_DATA);\n        } else {\n          const { logs } = data;\n          const onlineUserArr = zeroValueArr;\n          const registerUserArr = zeroValueArr;\n          const lastDateLimit = new Date(toDate.getTime() + 1000 * 60 * 60 * 24);\n          for (let i = 0; i < logs.length(); i += 1) {\n            const logDate = new Date(logs[i].date);\n            if (logDate >= fromDate && logDate < lastDateLimit) {\n              const index = Math.floor((logDate.getTime() - fromDateObj.getTime()) / (1000 * 60 * 60 * 24));\n              onlineUserArr[index] = logs[i].online_user_num;\n              registerUserArr[index] = logs[i].register_user_num;\n            }\n          }\n          const CHART_DATA = [\n            {\n              category: 'statistics',\n              data: [\n                { name: 'Online Users', data: onlineUserArr },\n                { name: 'Registered Users', data: registerUserArr }\n              ]\n            }\n          ];\n          setChartData(CHART_DATA);\n        }\n      }\n    }\n    getAnalytics();\n  }, [chartDate]);\n\n  const handleChangeSeriesData = (event) => {\n    setSeriesData(Number(event.target.value));\n  };\n\n  const daysList = (num) => {\n    const date = new Date(chartDate);\n    const datesCollection = [];\n\n    for (let i = 0; i < num; i += 1) {\n      const newDate = new Date(date.getTime() - i * 1000 * 60 * 60 * 24);\n      const dateFromatStr = moment(newDate).format('YYYY MMM DD');\n      // datesCollection.unshift(`${newDate.getDate()}/${newDate.getMonth() + 1}/${newDate.getFullYear()}`);\n      datesCollection.unshift(dateFromatStr);\n    }\n\n    return datesCollection;\n  };\n\n  const chartOptions = merge(BaseOptionChart(), {\n    xaxis: {\n      categories: daysList(dateCount)\n    }\n  });\n\n  return (\n    <Card>\n      <CardHeader\n        title=\"Statistics Chart\"\n        subheader=\"Growing Fast\"\n        // action={\n        //   <TextField\n        //     select\n        //     fullWidth\n        //     value={seriesData}\n        //     SelectProps={{ native: true }}\n        //     onChange={handleChangeSeriesData}\n        //     sx={{\n        //       '& fieldset': { border: '0 !important' },\n        //       '& select': { pl: 1, py: 0.5, pr: '24px !important', typography: 'subtitle2' },\n        //       '& .MuiOutlinedInput-root': { borderRadius: 0.75, bgcolor: 'background.neutral' },\n        //       '& .MuiNativeSelect-icon': { top: 4, right: 0, width: 20, height: 20 }\n        //     }}\n        //   >\n        //     {CHART_DATA.map((option) => (\n        //       <option key={option.category} value={option.category}>\n        //         {option.category}\n        //       </option>\n        //     ))}\n        //   </TextField>\n        // }\n      />\n\n      {chartData.map((item) => (\n        <Box key={item.category} sx={{ mt: 3, mx: 3 }} dir=\"ltr\">\n          {item.category === seriesData && (\n            <ReactApexChart type=\"line\" series={item.data} options={chartOptions} height={364} />\n          )}\n        </Box>\n      ))}\n    </Card>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}